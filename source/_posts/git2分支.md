---
title: git 分支管理
---
# 本地项目的状态

工作区就不说了，即是我们所在的文件夹，是一般资源管理器直接能看到的文件。

## 暂存区

暂存区是我们的老朋友了，它只是一个临时的保存区。唯一的作用是存储一次工作区部分（或全部）文件的备份。这些备份有两个作用：
- 和上一次 **提交** 作比较，看那些文件被修改
- 进行下一次**提交**

总这俩作用可以看出，暂存区是 **提交**的附属。那提交又是个什么，我们的提交去了哪里？

## 仓库与分支

提交会进入仓库，本地的仓库就是我们工作路径中的.git 文件，远程仓库就是一个网盘中的文件夹，仅此而已

而在一个仓库中，会有不同的 **分支** 来管理项目的不同的状态。

当git初始化完成会就自动生成了一个默认的主分支 **main**
<details>
<summary> 主分支 </summary>
旧版本的默认主分支为master，自XX版本后更新为main。因此许多老项目用的仍是master。当这完全不影响，分支名本质是一个指针，它指向一个路径（文件夹），本地或远程。我们可以在不同的地方对同一个路径取用不同的名字。即不同的分支名可以指向同一个位置。
</details>

一个完整的git工作流其实是：
工作区->暂存区->某个仓库的某个分支

其中某个仓库的某个分支，即是某个文件夹内具体的位置。

# 管理本地分支
使用git命令操作分支

``` bash
#创建新的分支
git branch <name>
#切换当前分支到已有分支
git checkout <name>
#查看所有分支
git branch
# 给当前分支重命名
git branch -m <new_name>
```

再次强调，分支是一个指针，这就是为何用 `git branch` ，分支名前面有一个 * 指向当前分支
```bash
git branch
* main 
```

**指针的哲学**

分支指向的路径，即某个具体的路径所代表的存储位置才是实际存放提交的地方。但要注意，你的指针只能在你的工作流中使用。
对个人来说，给分支改名或者你的分支和别人的分支名字不同都没关系，重要的是你要知道提交到了哪里，你要用对应的分支。这是。但对于团队协作，即当一位成员面对一个新项目时，它的环境是依靠分支名来区别不同的路径。更改分支名容易带来混乱，请提前约定后尽量不要改。必要修改时记得同步信息。

# 关联远程分支
在确保连接到远程仓库的前提下，拉取获取远程
`git fetch -all`

将本地分支和远程分支关联起来，这里当我们当前分支使用 pull、push时会直接使用指定的远程分支
```bash
git branch --set-upstream-to=origin/<remote-branchname> <local-branch_name>
```


